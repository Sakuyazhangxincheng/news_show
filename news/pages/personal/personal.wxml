<!--pages/personal/personal.wxml-->
<view class="log-container" wx:if="{{showing}}">
  <log-dialog
    class="log-dialog"
    title="{{loginInfo.title}}"
    content="{{loginInfo.content}}"
    logName="{{loginInfo.logName}}"
    logImage="{{loginInfo.logImage}}"
    bindcancel="onCancel"
    bindconfirm="onConfirm"
  >
  </log-dialog>
</view>
  

<view class="container" wx:if="{{canIUseOpenData}}">
  <view class="firstHalf">
    <view class="userinfo">
      <block wx:if="{{canIUseOpenData}}">
        <view class="userinfo-avatar">
          <open-data type="userAvatarUrl"></open-data>
        </view>
        <!-- <view class="userinfo-nickname" wx:if="{{nickName}}">
          <open-data type="userNickName" style="font-weight: bold; font-size: 37rpx;"></open-data>
        </view> -->
        <view wx:if="{{noName}}" class="firstSubName">
          <!--没有用户名，需要用户输入-->
          <input class="firstName" placeholder="输入您的用户名" type="text" name="userName" bindinput="getInputName"/>
          <button type="primary" bindtap="submitName" class="name-button"></button>
        </view>
        <view wx:else class="userinfo-nickname">
          {{nickName}}
        </view>
      </block>
      <block wx:elif="{{!hasUserInfo}}">
        <button wx:if="{{canIUseGetUserProfile}}" bindtap="getUserProfile">授权登录</button>
        <button wx:elif="{{canIUse}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo">授权登录</button>
        <view wx:else>请使用1.4.4以上版本基础库</view>
      </block>
      <block wx:else>
        <image class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
        <text class="userinfo-nickname">{{userInfo.nickName}}</text>
      </block>
    </view>
    <view class="title">我的收藏</view>
  </view>

  <view class="secondHalf">
    <view wx:if="{{alreadyCollect}}">
      <view class="collections" wx:for="{{collections}}" wx:key="uniqueKey">
        <view class="item">
          <image class="img" src="{{item.thumbnail_pic_s}}" mode="scaleToFill"></image>
          <view class="number-wrapper">
            <text class="name">{{item.title}}</text>
            <view class="count-wrapper">
              <text class="count">{{item.data}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
    <view wx:else="{{!alreadyCollect}}" class="NoCollections">
      <view class="noTitle">这里空空如也~</view>
    </view>
  </view>
</view>